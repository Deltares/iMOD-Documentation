<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>iMOD Suite - About</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="_static/styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./_static/iMOD-doc-logo.svg" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">iMOD Suite</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./introduction.html" rel="" target="">
 <span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./viewer.html" rel="" target="">
 <span class="menu-text">iMOD Viewer</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./python.html" rel="" target="">
 <span class="menu-text">iMOD Python</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./coupler.html" rel="" target="">
 <span class="menu-text">iMOD Coupler</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./tutorial.html" rel="" target="">
 <span class="menu-text">Tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./about.html" rel="" target="" aria-current="page">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./practical.html" rel="" target="">
 <span class="menu-text">Practical tips</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Deltares/iMOD-Documentation" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#get-involved" id="toc-get-involved" class="nav-link active" data-scroll-target="#get-involved">Get involved</a>
  <ul class="collapse">
  <li><a href="#questions-and-help" id="toc-questions-and-help" class="nav-link" data-scroll-target="#questions-and-help">Questions and help</a></li>
  <li><a href="#bugs-source-code" id="toc-bugs-source-code" class="nav-link" data-scroll-target="#bugs-source-code">Bugs, source code</a></li>
  </ul></li>
  <li><a href="#history" id="toc-history" class="nav-link" data-scroll-target="#history">History</a></li>
  <li><a href="#trainings" id="toc-trainings" class="nav-link" data-scroll-target="#trainings">Trainings</a>
  <ul class="collapse">
  <li><a href="#delft-software-days" id="toc-delft-software-days" class="nav-link" data-scroll-target="#delft-software-days">Delft Software Days</a></li>
  <li><a href="#past-trainings-imod-suite" id="toc-past-trainings-imod-suite" class="nav-link" data-scroll-target="#past-trainings-imod-suite">Past trainings iMOD Suite</a></li>
  </ul></li>
  <li><a href="#publications-using-imod-suite" id="toc-publications-using-imod-suite" class="nav-link" data-scroll-target="#publications-using-imod-suite">Publications using iMOD Suite</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">About</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="get-involved" class="level2">
<h2 class="anchored" data-anchor-id="get-involved">Get involved</h2>
<section id="questions-and-help" class="level3">
<h3 class="anchored" data-anchor-id="questions-and-help">Questions and help</h3>
<p>If you have questions on using iMOD Suite or want to report a bug, you can send an email to <code>imod.support@deltares.nl</code>.</p>
</section>
<section id="bugs-source-code" class="level3">
<h3 class="anchored" data-anchor-id="bugs-source-code">Bugs, source code</h3>
<p>Below is the list of repositories that contain the source code of the individual components. You can raise issues, or suggest changes, here.</p>
<ul>
<li><a href="https://github.com/Deltares/iMOD-Documentation">iMOD Documentation Github</a></li>
<li><a href="https://github.com/Deltares/imod-qgis">iMOD QGIS plugin Github</a></li>
<li><a href="https://github.com/Deltares/imod-gui">iMOD 3D Viewer Github</a></li>
<li><a href="https://gitlab.com/deltares/imod/imod-python">iMOD Python Gitlab</a></li>
</ul>
</section>
</section>
<section id="history" class="level2">
<h2 class="anchored" data-anchor-id="history">History</h2>
<p>Developments on iMOD started in 2006, with the aim to make groundwater modelling with MODFLOW easier. iMOD developed into a full fletched GUI, which could be used to build and analyse groundwater models from start to finish. Focus of the software always has been on large groundwater models, for which the software was so successful that most regional groundwater models owned by water boards in Netherlands, plus the Dutch National model (LHM), run on iMOD. In 2014, in Deltares’ move to make their software open source, the Fortran code of iMOD was shared and in 2015 the compiled executables became freely available. In many international projects (for example in India, New Orleans, Colombia, Germany, and Switzerland) this was one of the reasons to adopt iMOD as the modelling software. iMOD’s capabilities of simulating large groundwater models were pushed further in 2017 when iMOD and its custom computational kernels iMODFLOW and iMOD-WQ, could be run in parallel. Developments on the GUI continued up to 2020, when it became apparent that the approach up to that point had a few drawbacks:</p>
<ul>
<li><p>With the release of Modflow 6, computations on unstructured grids were possible. This created a demand for supporting all types of unstructured grids. iMOD, however, could not support these grids (except multi-model structured subgrids).</p></li>
<li><p>It was difficult to connect iMOD to the ever changing software and data science ecosystem, because of the use of Fortran and iMOD’s custom data formats. For example, Python has a larger ecosystem, allowing users to easily incorporate all kinds of packages into their workflows.</p></li>
</ul>
<p>Therefore, in 2021, the <strong>iMOD Suite</strong> was released. This suite consists of a Python package, a QGIS plugin, and a 3D viewer. It therefore supports reproducible workflows for unstructured groundwater models and relies more on standard filetypes such as NetCDF, UGRID, and shapefiles.</p>
<p>The classic iMOD GUI and its batch functionality is consolidated under the name <strong>iMOD 5</strong>, and will be maintained for the coming years. During this transition period it is easy to use iMOD 5 in combination with iMOD Suite. New developments will land in iMOD Suite.</p>
<!---
FUTURE: Picture can be replaced with a timeline https://mermaid.js.org/syntax/timeline.html

When quarto is updated with a more recent mermaid version.
--->
<div class="cell">
<div class="cell-output-display">
<div>
<div>

<pre class="mermaid mermaid-js">flowchart TB
  subgraph 2006
  A{iMOD 1.0}
  X{{Start development}}
  end
  A --&gt; B{iMOD 2.0}
  subgraph 2014
  B
  Y{{Fortran code \n available as open source}}
  end
  B --&gt; C{iMOD 3.0}
  subgraph 2015
  C
  Z{{Executables freely \n available}}
  end
  C --&gt; D{iMOD 4.0}
  subgraph 2017
  D
  XX{{parallel Solver Pks}}
  end
  D --&gt; E{iMOD 5.0}
  subgraph 2019
  E
  XY{{iMOD Water Quality \n and MODFLOW6}}
  end
  E --&gt; F{iMOD 5.2}
  subgraph 2020
  F
  XZ{{BMI coupling \n Modflow6-MetaSWAP}}
  end
  F --&gt; G{iMOD Suite}
  F --&gt; H{iMOD 5.3}
  subgraph 2021
  G
  YX{{Tooling in Python, QGIS \n C++. Unstructured grids}}
  end
  subgraph 2021 
  H
  end
  H --&gt; I{iMOD 5.5}
  G --&gt; J{iMOD Suite}
  subgraph 2023
  I
  end
  subgraph 2023 
  J
  YY{{Model input validation, \n CPT plotting in QGIS, \n Backwards \n compatibility iMOD 5}}
  end
</pre>
</div>
</div>
</div>
</div>
</section>
<section id="trainings" class="level2">
<h2 class="anchored" data-anchor-id="trainings">Trainings</h2>
<section id="delft-software-days" class="level3">
<h3 class="anchored" data-anchor-id="delft-software-days">Delft Software Days</h3>
<p>Twice a year, there is an iMOD day, where users can hear the latest iMOD developments and get training in the latest features. These are a great opportunity to get to know fellow users and the developers. Trainings will be announced on the <a href="https://softwaredays.deltares.nl/">Delft Software Days website</a> and via the iMOD mailing list, so keep an eye out on those.</p>
<p>In 2021, the Delft Software Days were not held in person but recorded as webinars, which can be viewed online. Note that due to privacy settings, you might need follow the link below the video to view it on the Deltares Vimeo page.</p>
<iframe src="https://player.vimeo.com/video/651111537?h=53d277cee4" width="640" height="360" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen=""></iframe>
<p><a href="https://vimeo.com/651111537">iMOD User Day 2021</a> from <a href="https://vimeo.com/deltares">Deltares</a> on <a href="https://vimeo.com">Vimeo</a>.</p>
</section>
<section id="past-trainings-imod-suite" class="level3">
<h3 class="anchored" data-anchor-id="past-trainings-imod-suite">Past trainings iMOD Suite</h3>
<p>2023-02: National University of Singapore, Singapore</p>
<p><img src="figures/about/training-singapore.jpg" class="img-fluid"></p>
<p>2022-11: Deltares Campus, Delft</p>
<p><img src="figures/about/training-delft.jpg" class="img-fluid"></p>
<p>2022-06: Trinity college, Dublin</p>
<p><img src="figures/about/training-ireland.jfif" class="img-fluid"></p>
</section>
</section>
<section id="publications-using-imod-suite" class="level2">
<h2 class="anchored" data-anchor-id="publications-using-imod-suite">Publications using iMOD Suite</h2>
<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-Delsman2023" class="csl-entry" role="listitem">
Delsman, Joost R., Tobias Mulder, Betsy Romero Verastegui, Huite Bootsma, Pieter Zitman, Sebastian Huizer, and Gualbert H. P. Oude Essink. 2023. <span>“Reproducible Construction of a High-Resolution National Variable-Density Groundwater Salinity Model for the Netherlands.”</span> <em>Environmental Modelling &amp; Software</em>, 105683. https://doi.org/<a href="https://doi.org/10.1016/j.envsoft.2023.105683">https://doi.org/10.1016/j.envsoft.2023.105683</a>.
</div>
<div id="ref-VanEngelen2022" class="csl-entry" role="listitem">
Engelen, J. van, G H P Oude Essink, and M F P Bierkens. 2022. <span>“<span class="nocase">Sustainability of fresh groundwater resources in fifteen major deltas around the world</span>.”</span> <em>Environmental Research Letters</em> 17 (12): 125001. <a href="https://doi.org/10.1088/1748-9326/aca16c">https://doi.org/10.1088/1748-9326/aca16c</a>.
</div>
<div id="ref-VanEngelen" class="csl-entry" role="listitem">
Engelen, Joeri van, Marc F. P. Bierkens, Joost R. Delsman, and Gualbert H. P. Oude Essink. 2020. <span>“<span class="nocase">Factors Determining the Natural Fresh-Salt Groundwater Distribution in Deltas</span>.”</span> <em>Water Resources Research</em> 57 (1). <a href="https://doi.org/10.1029/2020WR027290">https://doi.org/10.1029/2020WR027290</a>.
</div>
<div id="ref-VanEngelen2019" class="csl-entry" role="listitem">
Engelen, Joeri van, Jarno Verkaik, Jude King, Eman R. Nofal, Marc F. P. Bierkens, and Gualbert H. P. Oude Essink. 2019. <span>“<span class="nocase">A three-dimensional palaeohydrogeological reconstruction of the groundwater salinity distribution in the Nile Delta Aquifer</span>.”</span> <em>Hydrology and Earth System Sciences</em> 23: 5175–98. <a href="https://doi.org/10.5194/hess-2019-151">https://doi.org/10.5194/hess-2019-151</a>.
</div>
<div id="ref-King2022" class="csl-entry" role="listitem">
King, Jude, Tobias Mulder, Gualbert Oude Essink, and Marc F. P. Bierkens. 2021. <span>“<span class="nocase">Joint estimation of groundwater salinity and hydrogeological parameters using variable-density groundwater flow, salt transport modelling and airborne electromagnetic surveys</span>.”</span> <em>Advances in Water Resources</em> 160 (December): 104118. <a href="https://doi.org/10.1016/j.advwatres.2021.104118">https://doi.org/10.1016/j.advwatres.2021.104118</a>.
</div>
<div id="ref-Seibert2023" class="csl-entry" role="listitem">
Seibert, Stephan L., Janek Greskowiak, Friederike Bungenstock, Holger Freund, Martina Karle, Rena Meyer, Gualbert H. P. Oude Essink, Joeri van Engelen, and Gudrun Massmann. 2023. <span>“Paleo-Hydrogeological Modeling to Understand Present-Day Groundwater Salinities in a Low-Lying Coastal Groundwater System (Northwestern Germany).”</span> <em>Water Resources Research</em> 59 (4): 1–24. https://doi.org/<a href="https://doi.org/10.1029/2022WR033151">https://doi.org/10.1029/2022WR033151</a>.
</div>
<div id="ref-Thomas2023" class="csl-entry" role="listitem">
Thomas, Ariel T., Aaron Micallef, Shuangmin Duan, and Zhihui Zou. 2023. <span>“Characteristics and Controls of an Offshore Freshened Groundwater System in the Shengsi Region, East China Sea.”</span> <em>Frontiers in Earth Science</em> 11. <a href="https://doi.org/10.3389/feart.2023.1198215">https://doi.org/10.3389/feart.2023.1198215</a>.
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>