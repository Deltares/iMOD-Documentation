<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>iMOD Suite - Technical Reference</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./coupler_metamod_config.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="_static/styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./_static/iMOD-doc-logo.svg" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">iMOD Suite</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./introduction.html" rel="" target="">
 <span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./viewer_index.html" rel="" target="">
 <span class="menu-text">iMOD Viewer</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./python_index.html" rel="" target="">
 <span class="menu-text">iMOD Python</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./coupler_index.html" rel="" target="" aria-current="page">
 <span class="menu-text">iMOD Coupler</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./tutorial_index.html" rel="" target="">
 <span class="menu-text">Tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./practical_index.html" rel="" target="">
 <span class="menu-text">Practical tips</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Deltares/iMOD-Documentation" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./coupler_metamod_config.html">MetaSWAP - MODFLOW 6</a></li><li class="breadcrumb-item"><a href="./coupler_metamod_technical.html">Technical Reference</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coupler_index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><i class="fa-solid fa-plug" aria-label="plug"></i> iMOD Coupler</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">MetaSWAP - MODFLOW 6</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coupler_metamod_config.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Configuration</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coupler_metamod_technical.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Technical Reference</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#requirements" id="toc-requirements" class="nav-link active" data-scroll-target="#requirements">Requirements</a></li>
  <li><a href="#data-exchanges" id="toc-data-exchanges" class="nav-link" data-scroll-target="#data-exchanges">Data exchanges</a>
  <ul class="collapse">
  <li><a href="#modflow-6-to-metaswap" id="toc-modflow-6-to-metaswap" class="nav-link" data-scroll-target="#modflow-6-to-metaswap">MODFLOW 6 to MetaSWAP</a>
  <ul class="collapse">
  <li><a href="#heads" id="toc-heads" class="nav-link" data-scroll-target="#heads">Heads</a></li>
  </ul></li>
  <li><a href="#metaswap-to-modflow" id="toc-metaswap-to-modflow" class="nav-link" data-scroll-target="#metaswap-to-modflow">MetaSWAP to MODFLOW</a>
  <ul class="collapse">
  <li><a href="#storage" id="toc-storage" class="nav-link" data-scroll-target="#storage">Storage</a></li>
  <li><a href="#recharge" id="toc-recharge" class="nav-link" data-scroll-target="#recharge">Recharge</a></li>
  <li><a href="#sprinkling" id="toc-sprinkling" class="nav-link" data-scroll-target="#sprinkling">Sprinkling</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#files" id="toc-files" class="nav-link" data-scroll-target="#files">Files</a>
  <ul class="collapse">
  <li><a href="#metaswap" id="toc-metaswap" class="nav-link" data-scroll-target="#metaswap">MetaSWAP</a>
  <ul class="collapse">
  <li><a href="#mod2svat.inp" id="toc-mod2svat.inp" class="nav-link" data-scroll-target="#mod2svat.inp">mod2svat.inp</a></li>
  </ul></li>
  <li><a href="#modflow-6" id="toc-modflow-6" class="nav-link" data-scroll-target="#modflow-6">MODFLOW 6</a>
  <ul class="collapse">
  <li><a href="#filename.rch" id="toc-filename.rch" class="nav-link" data-scroll-target="#filename.rch">[filename].rch</a></li>
  <li><a href="#filename.wel" id="toc-filename.wel" class="nav-link" data-scroll-target="#filename.wel">[filename].wel</a></li>
  </ul></li>
  <li><a href="#coupler" id="toc-coupler" class="nav-link" data-scroll-target="#coupler">Coupler</a>
  <ul class="collapse">
  <li><a href="#nodenr2svat.dxc" id="toc-nodenr2svat.dxc" class="nav-link" data-scroll-target="#nodenr2svat.dxc">nodenr2svat.dxc</a></li>
  <li><a href="#rchindex2svat.dxc" id="toc-rchindex2svat.dxc" class="nav-link" data-scroll-target="#rchindex2svat.dxc">rchindex2svat.dxc</a></li>
  <li><a href="#wellindex2svat.dxc" id="toc-wellindex2svat.dxc" class="nav-link" data-scroll-target="#wellindex2svat.dxc">wellindex2svat.dxc</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#how-to-define-a-second-stress-package-for-modflow6" id="toc-how-to-define-a-second-stress-package-for-modflow6" class="nav-link" data-scroll-target="#how-to-define-a-second-stress-package-for-modflow6">How to define a second stress package for MODFLOW6</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Technical Reference</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>This document describes how MetaSWAP and MODFLOW6 are coupled. It is intended for groundwater modellers, who need to know which variables are exchanged between computational kernels and at which moment. For details of the inner workings of the code, we refer to the docstrings in the code.</p>
<p>Below is a flowchart showing the order in which one timestep is iteratively solved and when data is exchanged between MetaSWAP and MODFLOW6.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./figures/coupler/MF6BMI_coupling.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">MF6BMI Coupling</figcaption>
</figure>
</div>
<section id="requirements" class="level1">
<h1>Requirements</h1>
<ul>
<li>Currently only confined flow is supported, similar to a previous implementation of MetaSWAP-MODFLOW coupling.</li>
<li>Both the specific storage and the storage coefficient option of MODFLOW 6 are supported.</li>
<li>A recharge package (RCH) is required in the MODFLOW 6 model to facilitate the recharge flux of MetaSWAP.</li>
<li>A well package (WEL) is required in the MODFLOW 6 to facilitate the extraction of groundwater for MetaSWAP’s sprinkling.</li>
<li>The sum of svat areas should not exceed the area of the MODFLOW cell they are coupled to.</li>
<li>Currently only multiple svats can be coupled to one MODFLOW cell, and not the other way around. It is not possible to couple multiple MODFLOW cells to one svat.</li>
</ul>
</section>
<section id="data-exchanges" class="level1">
<h1>Data exchanges</h1>
<section id="modflow-6-to-metaswap" class="level2">
<h2 class="anchored" data-anchor-id="modflow-6-to-metaswap">MODFLOW 6 to MetaSWAP</h2>
<section id="heads" class="level3">
<h3 class="anchored" data-anchor-id="heads">Heads</h3>
<p>MODFLOW sets the heads in MetaSWAP, to be specific the <code>hgwmodf</code> variable. When multiple svats are coupled to one MODFLOW cell, each svat is given MODFLOW’s head. When multiple MODFLOW cells are coupled to one svat, the arithmetic average is taken.</p>
</section>
</section>
<section id="metaswap-to-modflow" class="level2">
<h2 class="anchored" data-anchor-id="metaswap-to-modflow">MetaSWAP to MODFLOW</h2>
<p>MetaSWAP provides a recharge, sets the storage, and extracts groundwater from deeper layers for sprinkling (if switched on).</p>
<section id="storage" class="level3">
<h3 class="anchored" data-anchor-id="storage">Storage</h3>
<p>q</p>
</section>
<section id="recharge" class="level3">
<h3 class="anchored" data-anchor-id="recharge">Recharge</h3>
<p>Recharge is provided by MetaSWAP to MODFLOW. MetaSWAP internally stores volumes that should be provided to MODFLOW, so these are converted to rates by dividing by the timestep length. When multiple svats are coupled to one MODFLOW cell, recharge rates are summed.</p>
</section>
<section id="sprinkling" class="level3">
<h3 class="anchored" data-anchor-id="sprinkling">Sprinkling</h3>
<p>Groundwater extraction rates to set sprinkling are computed by MetaSWAP based on irrigation requirements. MetaSWAP internally stores volumes that should be provided to MODFLOW, so these are converted to rates by dividing by the timestep length. When multiple svats are coupled to one MODFLOW cell, extraction rates are summed.</p>
</section>
</section>
</section>
<section id="files" class="level1">
<h1>Files</h1>
<p>The following files are required to couple the two model codes. These files provide the mappings from MODFLOW indices to the MetaSWAP svats.</p>
<p>MetaSWAP requires the file:</p>
<ul>
<li><code>mod2svat.inp</code></li>
</ul>
<p>MODFLOW6 requires the files:</p>
<ul>
<li><code>[filename].rch</code></li>
<li><code>[filename].wel</code> (optional)</li>
</ul>
<p>The coupler itself requires the following files:</p>
<ul>
<li><code>nodenr2svat.dxc</code></li>
<li><code>rchindex2svat.dxc</code></li>
<li><code>wellindex2svat.dxc</code> (optional)</li>
</ul>
<p>Below we will describe the format for each file.</p>
<section id="metaswap" class="level2">
<h2 class="anchored" data-anchor-id="metaswap">MetaSWAP</h2>
<section id="mod2svat.inp" class="level3">
<h3 class="anchored" data-anchor-id="mod2svat.inp">mod2svat.inp</h3>
<p>The file format for this file is also described in the <a href="ftp://ftp.wur.nl/simgro/doc/Report_913_3_V8_0_0_7.pdf">SIMGRO IO manual</a>. It is as follows:</p>
<pre><code>node_nr svat ly
...</code></pre>
<p>Were <code>node_nr</code> is the MODFLOW6 node number (to be specific: the user node number), which replaces the MODFLOW 2005 CellID. <code>svat</code> is the MetaSWAP svat number and <code>ly</code> is the MODFLOW layer number. Note that the format for this file should be fixed to</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ss">f"</span><span class="sc">{</span>nodenr<span class="sc">:10d}</span><span class="ss">  </span><span class="sc">{</span>svat<span class="sc">:10d}{</span>ly<span class="sc">:2d}</span><span class="ss">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>where the number behind the colon indicated the number of characters, padded with whitespace. Note the two whitespaces between <code>nodenr</code> and <code>svat</code>.</p>
</section>
</section>
<section id="modflow-6" class="level2">
<h2 class="anchored" data-anchor-id="modflow-6">MODFLOW 6</h2>
<section id="filename.rch" class="level3">
<h3 class="anchored" data-anchor-id="filename.rch">[filename].rch</h3>
<p>A dummy recharge file, of which the fluxes will be overridden. The location of the recharge cells is used to assign an recharge index by Modflow6. The file format of the .rch file is described here. To specify an uncoupled recharge as well, a second RCH package should be defined. How to define a second stress package is explained here. Please note that in the model name file the package name should correspond to the package name specified in the <a href="./coupler_metamod_config.html">configuration file</a>.</p>
</section>
<section id="filename.wel" class="level3">
<h3 class="anchored" data-anchor-id="filename.wel">[filename].wel</h3>
<p>A dummy well file, of which the fluxes will be overridden. The location of the wells is used to assign a well index by Modflow6. The file format of the .wel file is described here. To specify uncoupled extractions/injections as well, a second WEL package should be defined. How to define a second stress package is explained here. Please note that the package name in the <a href="https://modflow6.readthedocs.io/en/latest/_mf6io/gwf-nam.html#block-packages">model name file</a> should correspond to the package name specified in the <a href="./coupler_metamod_config.html">configuration file</a>.</p>
</section>
</section>
<section id="coupler" class="level2">
<h2 class="anchored" data-anchor-id="coupler">Coupler</h2>
<section id="nodenr2svat.dxc" class="level3">
<h3 class="anchored" data-anchor-id="nodenr2svat.dxc">nodenr2svat.dxc</h3>
<p>This file takes care of mapping the MODFLOW node numbers to the MetaSWAP svats, which is required for coupling the heads and storages of both kernels, it thus excludes nodes connected where wells are for sprinkling. The file format is as follows:</p>
<pre><code>node_nr svat ly
...</code></pre>
<p>Where <code>node_nr</code> is the MODFLOW6 node number (to be specific: the user node number), which replaces the MODFLOW 2005 CellID. <code>svat</code> is the MetaSWAP svat number and <code>ly</code> is the Modflow layer number.</p>
</section>
<section id="rchindex2svat.dxc" class="level3">
<h3 class="anchored" data-anchor-id="rchindex2svat.dxc">rchindex2svat.dxc</h3>
<p>This file takes care of mapping the recharge cells to the MetaSWAP svats. The file format is as follows:</p>
<pre><code>rch_index svat ly
...</code></pre>
<p>Where <code>rch_index</code> is the MODFLOW6 RCH index number, which equals the row number of the data specified under <code>period</code> in the <code>.rch</code> file. <code>svat</code> is the MetaSWAP svat number and <code>ly</code> is the MODFLOW layer number.</p>
</section>
<section id="wellindex2svat.dxc" class="level3">
<h3 class="anchored" data-anchor-id="wellindex2svat.dxc">wellindex2svat.dxc</h3>
<p>This file takes care of mapping MODFLOW wells to the MetaSWAP svats for sprinkling. The file format is as follows:</p>
<pre><code>well_index svat ly
...</code></pre>
<p>Where <code>well_index</code> is the MODFLOW6 WEL index number, which equals the row number of the data specified under <code>period</code> in the <code>.wel</code> file. <code>svat</code> is the MetaSWAP svat number and <code>ly</code> is the MODFLOW layer number.</p>
</section>
</section>
</section>
<section id="how-to-define-a-second-stress-package-for-modflow6" class="level1">
<h1>How to define a second stress package for MODFLOW6</h1>
<p>A second stress package (in our case named <code>WELL2</code>) can be defined in the flow model’s <code>.nam</code> file (GWF_1.nam).</p>
<pre><code>begin options
end options

begin packages
    dis6 GWF_1/dis.dis
    chd6 GWF_1/chd.chd
    npf6 GWF_1/npf.npf
    ic6 GWF_1/ic.ic
    wel6 GWF_1/wel.wel WELLS_MSW
    wel6 GWF_1/wel2.wel WELL2
    sto6 GWF_1/sto.sto
    oc6 GWF_1/oc.oc
end packages</code></pre>
<p>The argument values <code>WELLS_MSW</code> and <code>WELL2</code>, specify the package names to be printed in the water budget .lst file. In the configuration file, you have to specify which package name is used for the coupling.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./coupler_metamod_config.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Configuration</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>